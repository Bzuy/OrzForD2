<!-- DivideandConquer -->
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>M√¥ Ph·ªèng Merge Sort</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            text-align: center;
            padding: 20px;
        }

        h1 {
            color: #4CAF50;
        }

        .instruction-box {
            max-width: 800px;
            margin: 20px auto;
            background-color: #fff3cd;
            padding: 20px;
            border-left: 6px solid #ffc107;
            border-radius: 8px;
            text-align: left;
        }

        .instruction-box h2 {
            color: #856404;
        }

        .instruction-box ul {
            line-height: 1.7;
            color: #333;
            font-size: 1.05rem;
        }

        .input-section {
            margin: 20px 0;
        }

        input, button {
            padding: 10px;
            font-size: 16px;
            margin-right: 10px;
        }

        #visualization {
            margin-top: 30px;
        }

        .level {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .element {
            background-color: #ffffff;
            border: 2px solid #4CAF50;
            padding: 10px 15px;
            border-radius: 5px;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
            font-weight: bold;
            min-width: 30px;
        }

        .highlight {
            background-color: #ffdd57;
            border-color: #ffa500;
        }

        .arrow-box {
            display: flex;
            justify-content: center;
            gap: 60px;
            margin: 5px 0;
            font-size: 30px;
            animation: fadeIn 0.3s ease-in-out;
        }

        .home-link {
            display: block;
            text-align: center;
            font-size: 18px;
            color: #ff5733;
            text-decoration: none;
            font-weight: bold;
            margin-top: 20px;
        }

        .home-link:hover {
            color: #cc4627;
            text-decoration: underline;
        }

        .arrow {
            font-size: 30px;
            animation: fadeIn 0.3s ease-in-out;
        }

        .arrow.left {
            color: green;
        }

        .arrow.right {
            color: green;
        }

        .arrow.up {
            color: orange;
            margin-top: 10px;
        }

        .step-description {
            font-size: 1.1rem;
            color: #333;
            font-weight: bold;
            margin: 10px 0 20px;
            animation: fadeIn 0.3s ease-in-out;
        }

        .finish-message {
            font-size: 1.2rem;
            color: #4CAF50;
            font-weight: bold;
            margin-top: 20px;
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        dav img {
            border-radius: 100px;
        }

    </style>
</head>
<body>
    <h1>M√¥ Ph·ªèng Merge Sort - Chia ƒë·ªÉ Tr·ªã</h1>
    <img src="images/dv.png" class="dav">
    <div class="instruction-box">
        <h2>üìò H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng</h2>
        <ul>
            <li>B∆∞·ªõc 1: Nh·∫≠p m·ªôt m·∫£ng s·ªë nguy√™n v√†o √¥ nh·∫≠p li·ªáu, c√°ch nhau b·ªüi d·∫•u ph·∫©y (v√≠ d·ª•: <strong>10, 3, 5, 2</strong>).</li>
            <li>B∆∞·ªõc 2: Nh·∫•n n√∫t <strong>"B·∫Øt ƒë·∫ßu"</strong> ƒë·ªÉ xem qu√° tr√¨nh s·∫Øp x·∫øp theo thu·∫≠t to√°n Merge Sort (Chia ƒë·ªÉ tr·ªã).</li>
            <li>B∆∞·ªõc 3: Thu·∫≠t to√°n s·∫Ω chia m·∫£ng th√†nh c√°c m·∫£ng con nh·ªè h∆°n cho ƒë·∫øn khi ch·ªâ c√≤n m·ªôt ph·∫ßn t·ª≠, r·ªìi g·ªôp l·∫°i theo ƒë√∫ng th·ª© t·ª± s·∫Øp x·∫øp.</li>
            <li>B∆∞·ªõc 4: M·ªói l·∫ßn chia m·∫£ng s·∫Ω c√≥ m≈©i t√™n <strong>‚Üì</strong> ch·ªâ xu·ªëng (chia), v√† m·ªói l·∫ßn g·ªôp m·∫£ng s·∫Ω c√≥ m≈©i t√™n <strong>‚Üë</strong> ch·ªâ l√™n (g·ªôp).</li>
            <li>B∆∞·ªõc 5: C√°c b∆∞·ªõc s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã d∆∞·ªõi d·∫°ng m√¥ t·∫£, gi√∫p b·∫°n d·ªÖ d√†ng theo d√µi.</li>
        </ul>
    </div>
    <div class="input-section">
        <input type="text" id="arrayInput" placeholder="Nh·∫≠p m·∫£ng, v√≠ d·ª•: 8,3,7,1,4,2">
        <button onclick="startMergeSort()">B·∫Øt ƒë·∫ßu</button>
    </div>

    <div id="visualization"></div>

    <script>
        function startMergeSort() {
            const input = document.getElementById("arrayInput").value;
            const arr = input.split(',').map(x => parseInt(x.trim())).filter(x => !isNaN(x));
            if (arr.length === 0) {
                alert("Vui l√≤ng nh·∫≠p m·∫£ng h·ª£p l·ªá!");
                return;
            }

            const container = document.getElementById("visualization");
            container.innerHTML = "";
            displayArray(arr, container, "B·∫Øt ƒë·∫ßu v·ªõi m·∫£ng ban ƒë·∫ßu");
            setTimeout(() => {
                mergeSort(arr, container);
            }, 600);
        }

        function displayArray(arr, container, description = "", highlight = false) {
            const desc = document.createElement("div");
            desc.className = "step-description";
            desc.textContent = description;
            container.appendChild(desc);

            const levelDiv = document.createElement("div");
            levelDiv.className = "level";

            arr.forEach(num => {
                const el = document.createElement("div");
                el.className = "element";
                if (highlight) el.classList.add("highlight");
                el.textContent = num;
                levelDiv.appendChild(el);
            });

            container.appendChild(levelDiv);
        }

        function addSplitArrows(container) {
            const arrowBox = document.createElement("div");
            arrowBox.className = "arrow-box";

            const leftArrow = document.createElement("div");
            leftArrow.className = "arrow left";
            leftArrow.textContent = "‚Üì";

            const rightArrow = document.createElement("div");
            rightArrow.className = "arrow right";
            rightArrow.textContent = "‚Üì";

            arrowBox.appendChild(leftArrow);
            arrowBox.appendChild(rightArrow);
            container.appendChild(arrowBox);
        }

        function addMergeArrow(container) {
            const mergeArrow = document.createElement("div");
            mergeArrow.className = "arrow up";
            mergeArrow.textContent = "‚Üë";
            container.appendChild(mergeArrow);
        }

        function mergeSort(arr, container) {
            if (arr.length <= 1) return arr;

            const mid = Math.floor(arr.length / 2);
            const left = arr.slice(0, mid);
            const right = arr.slice(mid);

            // H∆∞·ªõng d·∫´n chia m·∫£ng
            displayArray(arr, container, "B∆∞·ªõc 1: Chia m·∫£ng th√†nh hai m·∫£ng con.");
            addSplitArrows(container);
            displayArray(left, container, "M·∫£ng b√™n tr√°i:");
            displayArray(right, container, "M·∫£ng b√™n ph·∫£i:");

            // G·ªçi ƒë·ªá quy ƒë·ªÉ s·∫Øp x·∫øp m·∫£ng b√™n tr√°i v√† b√™n ph·∫£i
            const sortedLeft = mergeSort(left, container);
            const sortedRight = mergeSort(right, container);

            // G·ªôp m·∫£ng l·∫°i
            const merged = merge(sortedLeft, sortedRight);
            addMergeArrow(container);
            displayArray(merged, container, "B∆∞·ªõc 2: G·ªôp hai m·∫£ng ƒë√£ s·∫Øp x·∫øp v√†o m·ªôt m·∫£ng.");

            // Hi·ªÉn th·ªã th√¥ng b√°o k·∫øt th√∫c
            const finishMessage = document.createElement("div");
            finishMessage.className = "finish-message";
            finishMessage.textContent = "K·∫øt th√∫c! M·∫£ng ƒë√£ ƒë∆∞·ª£c s·∫Øp x·∫øp ho√†n t·∫•t.";
            container.appendChild(finishMessage);

            return merged;
        }

        function merge(left, right) {
            let result = [], i = 0, j = 0;
            while (i < left.length && j < right.length) {
                if (left[i] < right[j]) {
                    result.push(left[i++]);
                } else {
                    result.push(right[j++]);
                }
            }
            return result.concat(left.slice(i)).concat(right.slice(j));
        }
    </script>

    <a href="algorithms.html" class="home-link">üè† Quay v·ªÅ</a>
</body>
</html>
